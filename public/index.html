<!DOCTYPE html>
<html lang="en">
<head>
    <title>Grid Game</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öîÔ∏è</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- SETUP SCREEN OVERLAY -->
<div id="setup-screen" class="modal-overlay">
    <div class="modal-content">
        <h1>Create New Game</h1>
        <div class="form-group">
            <label for="cfg-grid-size">Grid Size (20-100):</label>
            <input type="number" id="cfg-grid-size" value="50" min="20" max="100">
        </div>
        <div class="form-group">
            <label for="cfg-gold">Starting Gold:</label>
            <input type="number" id="cfg-gold" value="2000" min="500" step="100">
        </div>
        <div class="form-group">
            <label for="cfg-ai-count">AI Players (0-3):</label>
            <input type="number" id="cfg-ai-count" value="0" min="0" max="3">
        </div>
        <div class="form-group">
            <label for="cfg-ai-difficulty">AI Difficulty:</label>
            <select id="cfg-ai-difficulty">
                <option value="easy">Easy (Rookie)</option>
                <option value="normal" selected>Normal (Tactician)</option>
                <option value="hard">Hard (Strategist)</option>
            </select>
        </div>
        <button id="btn-start-game" class="primary-btn">Start Game</button>
        <p class="modal-note">Starting a new game will reset the board for everyone.</p>
    </div>
</div>

<div id="app-container">
    <!-- LEFT: Players & Stats -->
    <div id="left-panel">
        <h2>Grid War</h2>
        <button id="btn-new-game-trigger" class="small-btn">New Game</button>
        <div id="connection-status" class="connection-status">Connecting...</div>

        <h3>Players</h3>
        <ul id="player-list"></ul>

        <h3>Unit Info</h3>
        <div id="unit-info-panel" class="info-panel">
            <div id="unit-info-content"><em>Click a unit to see details</em></div>
        </div>

        <h3>Cell Info</h3>
        <div id="cell-info-panel" class="info-panel">
            <div id="cell-info-content"><em>Hover over a cell</em></div>
        </div>
    </div>

    <!-- CENTER: Game Board -->
    <div id="game-area">
        <h2 id="status">Waiting for players...</h2>

        <!-- Floating Text Overlay -->
        <div id="overlay-layer" class="overlay-layer"></div>

        <div class="canvas-wrapper">
            <canvas id="gameCanvas" width="1000" height="1000"></canvas>
            <!-- Context Menu -->
            <div id="context-menu">
                <button id="btn-attack">Attack</button>
                <button id="btn-rotate">Rotate</button>
                <button id="btn-deselect" class="danger">Deselect</button>
            </div>
        </div>

        <div id="toolbar">
            <div class="template" data-type="knight">‚öîÔ∏è Knight</div>
            <div class="template" data-type="archer">üèπ Archer</div>
            <div class="template" data-type="wizard">üßô Wizard</div>
            <div class="template" data-type="scout">üèá Scout</div>

            <button id="end-turn-btn">END TURN</button>
        </div>

        <p class="instructions">
            Click to Move/Select. Right-click or Menu to Attack/Rotate.<br>
            Spawn units during your turn in your base.
        </p>
    </div>

    <!-- RIGHT: Battle Log -->
    <div id="right-panel">
        <div id="log-panel">
            <h3 class="log-header">Battle Log</h3>
            <div id="log-content"></div>
        </div>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<!-- Client Modules in dependency order -->
<script src="renderer.js"></script>
<script src="uiManager.js"></script>
<script src="game.js"></script>
</body>
</html>